# Проект 2. Поиск вакансий.

***Проект представляет собой программу, взаимодействующую с пользователем, которая
получает список вакансий с сайта hh.ru, соответствующих запросам пользователя.***

---

## Интеграция с API

В проекте используется API https://dev.hh.ru/ для получения списка вакансий.
Вся работа с API реализована в модулях api_base и hh. 

В модуле api_base находится абстрактный класс 
**BaseAPI**, который определяет метод подключения к API и метод получения данных по поисковому запросу 
пользователя - одному слову. 

В модуле hh находится класс **HeadHunterAPI** для работы с конкретным API - платформой hh.ru.
Класс наследуется от абстрактного BaseAPI и имеет приватные атрибуты ___url_ и ___headers_.
Реализованы методы: 
* __connect_ - приватный метод подключения к API
* _get_data_ - метод получения данных по ключевому слову

Используемые библиотеки:
* abc - для создания абстрактного класса и его методов
* requests - для отправки запросов к API

---
## Работа с вакансиями
Для работы с вакансиями в модуле vacancies создан класс **Vacancy** с приватными атрибутами ___name_ (название профессии),
___salary_ (заработная плата), ___link_ (ссылка на вакансию), ___experience_ (требуемый опыт работы).

Для атрибута ___salary_ при инициализации объекта сразу вызывается метод ___validate_salary_, который проверяет, что передаваемое значение заработной платы
является словарем, в ином случае устанавливается значение _salary = 0.
Для атрибута __experience_ определено значение по умолчанию - "Нет требований".

Методы класса:
* _name, salary, link, experience_ - геттеры для получения значений приватных атрибутов
* _repr_ - магический вывод для структурированного вывода информации об объекте класса
* ___validate_salary_
* _lt, eq, gt_ - магические методы для сравнения зарплат двух вакансий
* _to_object_list_ - статический метод для преобразования данных из словаря в объект класса Vacancy

---
## Работа с файлом

**JsonBase** - абстрактный класс для работы с файлами. Он определяет методы добавления вакансии в файл,
получения и удаления конкретной вакансии из файла. 

**JsonSaver** - дочерний класс для JsonBase. Имеет приватный атрибут ___file_path_ - путь к файлу для сохранения вакансий, по умолчанию - vacancies.json.
Методы класса:
* ___load_data_ - метод загрузки данных из файла
* ___save_data_ - метод загрузки данных в файл
* ___vacancy_to_dict_ - метод для преобразования объекта класса Vacancy в словарь
* _add_vacancy_ - метод абстрактного класса, отвечающий за добавление вакансии в файл
* _get_vacancy_ - метод абстрактного класса, отвечающий за получение вакансии из файла по заданным фильтрам
* _delete_vacancy_ - метод абстрактного класса, отвечающий за удаление вакансии из файла

Используемые библиотеки:
* abc - для создания абстрактного класса и его методов
* json - для работы с файлами формата json
* os - для работы с файловой системой

---
## Взаимодействие с пользователем

Модуль **main** является точкой входа в приложение. В нем реализована функция взаимодействия с пользователем - _user_interaction()_.

Модуль **utils** хранит вспомогательные функции для обработки списка вакансий:
* _filter_by_keywords()_ - функция фильтрации вакансий по ключевым словам
* _filter_by_salary()_ - функция фильтрации вакансий по заданному диапазону зарплат
* _sort_by_salary()_ - функция сортировки вакансий по зарплате. Не используется отдельно, вызывается внутри следующей функции
* _top_n_vacancies()_ - функция для получения переданного количества отфильтрованных вакансий

Ход работы программы:
1) Создание объектов классов HeadHunterAPI и JsonSaver.
2) Запрос поискового слова у пользователя.
3) Получение данных от API при помощи метода get_data класса HeadHunterAPI.
4) Преобразование полученных данных в список объектов класса Vacancy.
5) Запрос ключевых слов для фильтрации у пользователя и фильтрация при помощи функции filter_by_keyword().
6) Запрос диапазона зарплат для фильтрации у пользователя и фильтрация при помощи функции filter_by_salary().
7) Запрос количества вакансий для вывода у пользователя.
8) Сохранение в файл и вывод вакансий.

---
## Тестирование

Все тесты для функций и методов программы находятся в директории **tests**.
В директории существует файл **conftest**, хранящий фикстуры, передаваемые в качестве параметров для тестов.
Среди них: образец списка вакансий, 3 вакансии, 1 вакансия с некорректным типом данных атрибута _salary, образец APi ответа,
пример json-файла и объект класса JsonSaver.

Функциональности, покрытые тестами: получение данных от API; добавление, удаление, получение вакансии из файла; 
функции модуля utils; инициализация объекта класса Vacancy, в том числе с некорректной зарплатой; магические методы класса Vacancy. 